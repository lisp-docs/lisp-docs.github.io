<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-tutorial/io" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.0.1">
<title data-rh="true">Input and Output | Common Lisp Docs</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://lisp-docs.github.io/img/1024px-Lisp_logo.svg.png"><meta data-rh="true" name="twitter:image" content="https://lisp-docs.github.io/img/1024px-Lisp_logo.svg.png"><meta data-rh="true" property="og:url" content="https://lisp-docs.github.io/docs/tutorial/io"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="google-site-verification" content="Vzaw013_bfdKeUVG89Ch3W1zC9_vH9ID2dPB9Dz0vr0"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Input and Output | Common Lisp Docs"><meta data-rh="true" name="description" content="This article needs to be checked!."><meta data-rh="true" property="og:description" content="This article needs to be checked!."><link data-rh="true" rel="icon" href="/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://lisp-docs.github.io/docs/tutorial/io"><link data-rh="true" rel="alternate" href="https://lisp-docs.github.io/docs/tutorial/io" hreflang="en"><link data-rh="true" rel="alternate" href="https://lisp-docs.github.io/docs/tutorial/io" hreflang="x-default"><link data-rh="true" rel="preconnect" href="https://C1F2Q5VM6X-dsn.algolia.net" crossorigin="anonymous"><link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="Common Lisp Docs RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="Common Lisp Docs Atom Feed">



<link rel="search" type="application/opensearchdescription+xml" title="Common Lisp Docs" href="/opensearch.xml"><link rel="stylesheet" href="/assets/css/styles.d316d1e5.css">
<script src="/assets/js/runtime~main.bdb9f939.js" defer="defer"></script>
<script src="/assets/js/main.e6c6641d.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return localStorage.getItem("theme")}catch(t){}}();t(null!==e?e:"light")}(),function(){try{const c=new URLSearchParams(window.location.search).entries();for(var[t,e]of c)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/logo.svg" alt="Lisp Logo" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/img/logo.svg" alt="Lisp Logo" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div><b class="navbar__title text--truncate">Common Lisp Docs</b></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/docs/tutorial">Tutorial</a><a href="https://lisp-docs.github.io/cl-language-reference/" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">Technical Reference</a><a class="navbar__item navbar__link" href="/docs/whylisp">Why Lisp?</a><a class="navbar__item navbar__link" href="/docs/howto">Guides</a></div><div class="navbar__items navbar__items--right"><a class="navbar__item navbar__link" href="/docs/contribute">Contribute!</a><a class="navbar__item navbar__link" href="/docs/help">Getting Help</a><a class="navbar__item navbar__link" href="/docs/about">About</a><a class="navbar__item navbar__link" href="/blog">Blog</a><a href="https://github.com/lisp-docs" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="navbarSearchContainer_Bca1"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"></span></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/tutorial">Tutorial Introduction</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/tutorial/for_beginners">Beginner Programmers</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/docs/tutorial/for_programmers">Experienced Programmers</a><button aria-label="Expand sidebar category &#x27;Experienced Programmers&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/tutorial/macros">Macros</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/docs/tutorial/projects">Structuring projects</a><button aria-label="Expand sidebar category &#x27;Structuring projects&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/tutorial/documentation">Documenting your Code</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/tutorial/motivation">Motivation</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/tutorial/using-cl-implementation">Common Lisp Implementations</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/tutorial/informal-introduction-to-lisp">An Informal Introduction to Common Lisp</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/tutorial/control-flows">Control Flow</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/tutorial/data-structures">Data Structures</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/tutorial/functions">Functions</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/tutorial/object-system">Object System</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" href="/docs/tutorial/io">Input and Output</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/tutorial/types">Types</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/tutorial/conditions">Condition System</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/docs/category/advanced-topics">Advanced Topics</a><button aria-label="Expand sidebar category &#x27;Advanced Topics&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/tutorial/index">Index</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/tutorial/glossary">Glossary</a></li></ul></nav></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">Input and Output</span><meta itemprop="position" content="1"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><h1>Input and Output</h1>
<div class="theme-admonition theme-admonition-warning admonition_xJq3 alert alert--warning"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path></svg></span>warning</div><div class="admonitionContent_BuS1"><p>This article <strong>needs to be checked!</strong>.
Please help contribute by checking it and making changes in <a href="https://github.com/lisp-docs/lisp-docs.github.io" target="_blank" rel="noopener noreferrer">our repository</a> or by clicking on the &quot;Edit this page&quot; link below.</p></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="introduction-to-input-and-output-in-common-lisp">Introduction to Input and Output in Common Lisp<a href="#introduction-to-input-and-output-in-common-lisp" class="hash-link" aria-label="Direct link to Introduction to Input and Output in Common Lisp" title="Direct link to Introduction to Input and Output in Common Lisp">​</a></h2>
<p>Input and Output (I/O) are essential aspects of any programming language, allowing programs to interact with the external world, such as reading data from files, displaying information to the user, and communicating with other programs. Common Lisp provides a powerful and flexible I/O system that handles various types of input and output, from simple text streams to binary data and complex data structures.</p>
<p>This tutorial will introduce you to the fundamental concepts of I/O in Common Lisp, covering standard input and output streams, file I/O, and techniques for reading and writing Lisp data structures to and from files.</p>
<p><strong>Key Concepts:</strong></p>
<ul>
<li><strong>Streams:</strong> Represent sources of input or destinations of output.</li>
<li><strong>Standard Streams:</strong> Predefined streams for standard input, standard output, and standard error.</li>
<li><strong>File I/O:</strong> Reading and writing data to and from files.</li>
<li><strong>Formatted Output:</strong> Using <code>format</code> for controlled output.</li>
<li><strong>Reading Lisp Objects:</strong> Using <code>read</code> to parse Lisp expressions from input.</li>
<li><strong>Writing Lisp Objects:</strong> Using <code>print</code>, <code>prin1</code>, <code>princ</code>, and <code>write</code> to output Lisp objects.</li>
</ul>
<p><strong>Table of Contents:</strong></p>
<p><strong>1. Standard Input and Output:</strong></p>
<ul>
<li><code>*standard-input*</code>: The standard input stream (usually the keyboard).</li>
<li><code>*standard-output*</code>: The standard output stream (usually the console).</li>
<li><code>*error-output*</code>: The standard error stream (for error messages).</li>
<li><code>read</code>: Reading Lisp objects from input.</li>
<li><code>print</code>, <code>prin1</code>, <code>princ</code>: Writing Lisp objects to output.</li>
<li><code>format</code>: Formatted output.</li>
</ul>
<p><strong>2. File I/O:</strong></p>
<ul>
<li><code>open</code>: Opening files for reading or writing.<!-- -->
<ul>
<li>File modes: <code>:input</code>, <code>:output</code>, <code>:io</code>, <code>:probe</code>.</li>
<li>Element types: <code>:element-type</code>.</li>
</ul>
</li>
<li><code>close</code>: Closing files.</li>
<li><code>with-open-file</code>: A convenient macro for handling file I/O.</li>
<li><code>read-line</code>: Reading a line from a file.</li>
<li><code>write-line</code>: Writing a line to a file.</li>
<li><code>read-char</code>, <code>write-char</code>: Reading and writing individual characters.</li>
<li><code>read-byte</code>, <code>write-byte</code>: Reading and writing individual bytes (for binary files).</li>
</ul>
<p><strong>3. Reading and Writing Lisp Data Structures:</strong></p>
<ul>
<li><code>read</code>: Reading arbitrary Lisp objects from a stream.</li>
<li><code>print</code>, <code>prin1</code>, <code>princ</code>, <code>write</code>: Writing Lisp objects to a stream.</li>
<li><code>*print-pretty*</code>: Controlling pretty printing.</li>
<li><code>*print-circle*</code>: Handling circular structures.</li>
<li><code>*print-readably*</code>: Ensuring that output can be read back in.</li>
<li>Using <code>with-standard-io-syntax</code> to control readtables.</li>
</ul>
<p><strong>4. Binary I/O:</strong></p>
<ul>
<li>Using <code>:element-type &#x27;(unsigned-byte 8)</code> (or similar) with <code>open</code>.</li>
<li><code>read-byte</code>, <code>write-byte</code>: Reading and writing bytes.</li>
</ul>
<p><strong>5. Pathnames:</strong></p>
<ul>
<li>Representing file and directory paths.</li>
<li>Pathname functions: <code>pathname</code>, <code>pathnamep</code>, <code>namestring</code>, <code>merge-pathnames</code>.</li>
</ul>
<p>This tutorial will provide practical examples for each topic, helping you understand how to use Common Lisp&#x27;s I/O functions effectively. You&#x27;ll learn how to handle different types of data, format output, and read and write complex Lisp data structures to persistent storage.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="1-standard-input-and-output-in-common-lisp">1. Standard Input and Output in Common Lisp<a href="#1-standard-input-and-output-in-common-lisp" class="hash-link" aria-label="Direct link to 1. Standard Input and Output in Common Lisp" title="Direct link to 1. Standard Input and Output in Common Lisp">​</a></h2>
<p>Standard input and output provide the most basic way for a Lisp program to interact with the user or other programs. Common Lisp defines special variables that represent these standard streams.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="11-standard-streams-standard-input-standard-output-error-output">1.1 Standard Streams: <code>*standard-input*</code>, <code>*standard-output*</code>, <code>*error-output*</code><a href="#11-standard-streams-standard-input-standard-output-error-output" class="hash-link" aria-label="Direct link to 11-standard-streams-standard-input-standard-output-error-output" title="Direct link to 11-standard-streams-standard-input-standard-output-error-output">​</a></h3>
<ul>
<li><strong><code>*standard-input*</code></strong>: This variable holds the standard input stream, which is usually connected to the keyboard. You read input from this stream using functions like <code>read</code>.</li>
<li><strong><code>*standard-output*</code></strong>: This variable holds the standard output stream, which is usually connected to the console or terminal. You write output to this stream using functions like <code>print</code>, <code>prin1</code>, <code>princ</code>, and <code>format</code>.</li>
<li><strong><code>*error-output*</code></strong>: This variable holds the standard error stream, which is typically also connected to the console but is used specifically for error messages. Using this separate stream allows error messages to be distinguished from regular output.</li>
</ul>
<p>These variables are dynamically scoped, meaning their values can be temporarily rebound within specific code blocks. This is useful for redirecting input or output, which we will cover in the File I/O section.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="12-read-reading-lisp-objects-from-input">1.2 <code>read</code>: Reading Lisp Objects from Input<a href="#12-read-reading-lisp-objects-from-input" class="hash-link" aria-label="Direct link to 12-read-reading-lisp-objects-from-input" title="Direct link to 12-read-reading-lisp-objects-from-input">​</a></h3>
<p>The <code>read</code> function reads a Lisp object from an input stream (by default, <code>*standard-input*</code>). It parses the input according to Lisp&#x27;s syntax and returns the corresponding Lisp object.</p>
<div class="language-lisp codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-lisp codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">(</span><span class="token car">print</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;Enter a number:&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">let</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">(</span><span class="token car">num</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token car">read</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">(</span><span class="token car">format</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">t</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;You entered: ~a~%&quot;</span><span class="token plain"> num</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">(</span><span class="token car">print</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;Enter a list:&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">let</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">(</span><span class="token car">my-list</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token car">read</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">(</span><span class="token car">format</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">t</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;You entered the list: ~a~%&quot;</span><span class="token plain"> my-list</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">(</span><span class="token car">print</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;Enter a string:&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">let</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">(</span><span class="token car">my-string</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token car">read</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">(</span><span class="token car">format</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">t</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;You entered the string: ~a~%&quot;</span><span class="token plain"> my-string</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>If you type <code>123</code> at the first prompt, <code>read</code> will return the integer <code>123</code>. If you type <code>(a b c)</code> at the second prompt, <code>read</code> will return the list <code>(A B C)</code>. If you type <code>&quot;hello&quot;</code> at the third prompt, <code>read</code> will return the string <code>&quot;hello&quot;</code>.</p>
<p><code>read</code> will signal an error if the input is not a valid Lisp expression.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="13-print-prin1-princ-writing-lisp-objects-to-output">1.3 <code>print</code>, <code>prin1</code>, <code>princ</code>: Writing Lisp Objects to Output<a href="#13-print-prin1-princ-writing-lisp-objects-to-output" class="hash-link" aria-label="Direct link to 13-print-prin1-princ-writing-lisp-objects-to-output" title="Direct link to 13-print-prin1-princ-writing-lisp-objects-to-output">​</a></h3>
<p>These functions write Lisp objects to an output stream (by default, <code>*standard-output*</code>).</p>
<ul>
<li>
<p><strong><code>print</code></strong>: Writes the object followed by a newline. The output is readable by <code>read</code>.</p>
<div class="language-lisp codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-lisp codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">(</span><span class="token car">print</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;Hello, world!&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">; Prints &quot;Hello, world!&quot; followed by a newline.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">(</span><span class="token car">print</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">&#x27;(</span><span class="token number" style="color:#36acaa">1</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">2</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">3</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">; Prints (1 2 3) followed by a newline.</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
<li>
<p><strong><code>prin1</code></strong>: Writes the object without a trailing newline. The output is readable by <code>read</code>.</p>
<div class="language-lisp codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-lisp codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">(</span><span class="token car">prin1</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;Hello&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token car">prin1</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot; world!&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">; Prints &quot;Hello&quot; &quot; world!&quot; (no newlines).</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
<li>
<p><strong><code>princ</code></strong>: Writes the object without a trailing newline and in a more human-readable format (e.g., strings are printed without quotes). The output is <em>not</em> guaranteed to be readable by <code>read</code>.</p>
<div class="language-lisp codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-lisp codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">(</span><span class="token car">princ</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;Hello&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token car">princ</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot; world!&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">; Prints Hello world!</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
</ul>
<p>Here&#x27;s a comparison:</p>
<div class="language-lisp codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-lisp codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">(</span><span class="token car">print</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;foo&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain">   </span><span class="token comment" style="color:#999988;font-style:italic">; Prints &quot;foo&quot; and a newline.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">(</span><span class="token car">prin1</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;foo&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">; Prints &quot;foo&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">(</span><span class="token car">princ</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;foo&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain">   </span><span class="token comment" style="color:#999988;font-style:italic">; Prints foo</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="14-format-formatted-output">1.4 <code>format</code>: Formatted Output<a href="#14-format-formatted-output" class="hash-link" aria-label="Direct link to 14-format-formatted-output" title="Direct link to 14-format-formatted-output">​</a></h3>
<p>The <code>format</code> function provides powerful control over output formatting. It takes a destination, a format string, and any arguments to be formatted.</p>
<p>The destination can be:</p>
<ul>
<li><code>t</code>: The standard output stream (<code>*standard-output*</code>).</li>
<li><code>nil</code>: Returns the formatted output as a string.</li>
<li>A stream object (for file I/O, which we will cover later).</li>
</ul>
<p>The format string contains format directives that control how the arguments are formatted. Here are some common directives:</p>
<ul>
<li><code>~a</code>: Prints the argument using <code>princ</code>.</li>
<li><code>~s</code>: Prints the argument using <code>prin1</code>.</li>
<li><code>~d</code>: Prints the argument as a decimal integer.</li>
<li><code>~f</code>: Prints the argument as a floating-point number.</li>
<li><code>~%</code>: Prints a newline.</li>
<li><code>~~</code>: Prints a tilde character.</li>
</ul>
<p><strong>Examples:</strong></p>
<div class="language-lisp codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-lisp codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">(</span><span class="token car">format</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">t</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;Hello, ~a!~%&quot;</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;world&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">; Prints &quot;Hello, world!&quot; and a newline.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">(</span><span class="token car">format</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">t</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;The number is ~d.~%&quot;</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">42</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">; Prints &quot;The number is 42.&quot; and a newline.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">(</span><span class="token car">format</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">t</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;Pi is approximately ~f.~%&quot;</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">3.14159</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">; Prints &quot;Pi is approximately 3.14159.&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">(</span><span class="token car">format</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">t</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;Pi is approximately ~,2f.~%&quot;</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">3.14159</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">; Prints &quot;Pi is approximately 3.14.&quot; (2 decimal places)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">(</span><span class="token car">format</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">nil</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;This will be returned as a string&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">; returns &quot;This will be returned as a string&quot;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p><code>format</code> is extremely versatile and can handle complex formatting scenarios. Consult the Common Lisp HyperSpec for a complete list of format directives.</p>
<p>This section covered the basics of standard input and output in Common Lisp. Understanding these functions is essential for interacting with the user and displaying information from your programs. The next section will cover file I/O.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="2-file-io-in-common-lisp">2. File I/O in Common Lisp<a href="#2-file-io-in-common-lisp" class="hash-link" aria-label="Direct link to 2. File I/O in Common Lisp" title="Direct link to 2. File I/O in Common Lisp">​</a></h2>
<p>File I/O allows your Lisp programs to interact with files on the file system, reading data from them and writing data to them.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="21-open-opening-files">2.1 <code>open</code>: Opening Files<a href="#21-open-opening-files" class="hash-link" aria-label="Direct link to 21-open-opening-files" title="Direct link to 21-open-opening-files">​</a></h3>
<p>The <code>open</code> function opens a file and returns a <em>stream object</em> that represents the connection to the file. It takes several keyword arguments:</p>
<ul>
<li><strong><code>pathname</code></strong>: The path to the file (a string or a pathname object).</li>
<li><strong><code>:direction</code></strong>: The direction of the stream:<!-- -->
<ul>
<li><code>:input</code>: Open for reading (the default).</li>
<li><code>:output</code>: Open for writing (creates the file if it doesn&#x27;t exist, overwrites if it does).</li>
<li><code>:io</code>: Open for both reading and writing.</li>
<li><code>:probe</code>: Checks if a file exists.</li>
</ul>
</li>
<li><strong><code>:if-exists</code></strong>: What to do if the file already exists (only relevant for <code>:direction :output</code>):<!-- -->
<ul>
<li><code>:supersede</code>: Overwrite the file (the default).</li>
<li><code>:append</code>: Append to the end of the file.</li>
<li><code>:new-version</code>: Create a new version of the file (implementation-dependent).</li>
<li><code>:rename</code>: Rename the existing file.</li>
<li><code>:error</code>: Signal an error.</li>
<li><code>nil</code>: Return <code>nil</code></li>
</ul>
</li>
<li><strong><code>:if-does-not-exist</code></strong>: What to do if the file does not exist (only relevant for <code>:direction :input</code>):<!-- -->
<ul>
<li><code>:error</code>: Signal an error (the default).</li>
<li><code>nil</code>: Return <code>nil</code>.</li>
<li><code>:create</code>: Create the file (only if <code>:direction</code> is <code>:io</code> or <code>:output</code>).</li>
</ul>
</li>
<li><strong><code>:element-type</code></strong>: Specifies the type of elements to be read or written (e.g., <code>&#x27;character</code>, <code>&#x27;(unsigned-byte 8)</code> for binary files). The default is <code>character</code>.</li>
</ul>
<p><strong>Examples:</strong></p>
<ul>
<li>
<p>Opening a file for reading:</p>
<div class="language-lisp codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-lisp codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">(</span><span class="token car">open</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;my-file.txt&quot;</span><span class="token plain"> </span><span class="token lisp-property property" style="color:#36acaa">:direction</span><span class="token plain"> </span><span class="token lisp-property property" style="color:#36acaa">:input</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
<li>
<p>Opening a file for writing, overwriting if it exists:</p>
<div class="language-lisp codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-lisp codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">(</span><span class="token car">open</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;output.txt&quot;</span><span class="token plain"> </span><span class="token lisp-property property" style="color:#36acaa">:direction</span><span class="token plain"> </span><span class="token lisp-property property" style="color:#36acaa">:output</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
<li>
<p>Opening a file for appending:</p>
<div class="language-lisp codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-lisp codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">(</span><span class="token car">open</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;log.txt&quot;</span><span class="token plain"> </span><span class="token lisp-property property" style="color:#36acaa">:direction</span><span class="token plain"> </span><span class="token lisp-property property" style="color:#36acaa">:output</span><span class="token plain"> </span><span class="token lisp-property property" style="color:#36acaa">:if-exists</span><span class="token plain"> </span><span class="token lisp-property property" style="color:#36acaa">:append</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
<li>
<p>Opening a binary file for writing:</p>
<div class="language-lisp codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-lisp codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">(</span><span class="token car">open</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;data.bin&quot;</span><span class="token plain"> </span><span class="token lisp-property property" style="color:#36acaa">:direction</span><span class="token plain"> </span><span class="token lisp-property property" style="color:#36acaa">:output</span><span class="token plain"> </span><span class="token lisp-property property" style="color:#36acaa">:element-type</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">&#x27;(</span><span class="token car">unsigned-byte</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">8</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="22-close-closing-files">2.2 <code>close</code>: Closing Files<a href="#22-close-closing-files" class="hash-link" aria-label="Direct link to 22-close-closing-files" title="Direct link to 22-close-closing-files">​</a></h3>
<p>It&#x27;s crucial to close files when you&#x27;re finished with them to release system resources. The <code>close</code> function closes a stream.</p>
<div class="language-lisp codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-lisp codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">let</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">(</span><span class="token car">stream</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token car">open</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;my-file.txt&quot;</span><span class="token plain"> </span><span class="token lisp-property property" style="color:#36acaa">:direction</span><span class="token plain"> </span><span class="token lisp-property property" style="color:#36acaa">:input</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">; ... read from the file ...</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">(</span><span class="token car">close</span><span class="token plain"> stream</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="23-with-open-file-a-convenient-macro">2.3 <code>with-open-file</code>: A Convenient Macro<a href="#23-with-open-file-a-convenient-macro" class="hash-link" aria-label="Direct link to 23-with-open-file-a-convenient-macro" title="Direct link to 23-with-open-file-a-convenient-macro">​</a></h3>
<p>The <code>with-open-file</code> macro simplifies file I/O by automatically opening and closing the file. Its syntax is:</p>
<div class="language-lisp codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-lisp codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">(</span><span class="token car">with-open-file</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token car">stream</span><span class="token plain"> pathname options</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  body</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<ul>
<li><strong><code>stream</code></strong>: A variable that will be bound to the stream object.</li>
<li><strong><code>pathname</code></strong>: The path to the file.</li>
<li><strong><code>options</code></strong>: Keyword arguments to <code>open</code>.</li>
<li><strong><code>body</code></strong>: The code that will operate on the file.</li>
</ul>
<p><strong>Example:</strong></p>
<div class="language-lisp codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-lisp codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">(</span><span class="token car">with-open-file</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token car">input</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;my-file.txt&quot;</span><span class="token plain"> </span><span class="token lisp-property property" style="color:#36acaa">:direction</span><span class="token plain"> </span><span class="token lisp-property property" style="color:#36acaa">:input</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">when</span><span class="token plain"> input </span><span class="token comment" style="color:#999988;font-style:italic">; Check if the file was opened successfully</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">(</span><span class="token car">loop</span><span class="token plain"> for line = </span><span class="token punctuation" style="color:#393A34">(</span><span class="token car">read-line</span><span class="token plain"> input </span><span class="token boolean" style="color:#36acaa">nil</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          while line</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          do </span><span class="token punctuation" style="color:#393A34">(</span><span class="token car">print</span><span class="token plain"> line</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="24-read-line-reading-a-line">2.4 <code>read-line</code>: Reading a Line<a href="#24-read-line-reading-a-line" class="hash-link" aria-label="Direct link to 24-read-line-reading-a-line" title="Direct link to 24-read-line-reading-a-line">​</a></h3>
<p>The <code>read-line</code> function reads a line of text from a stream, returning the line as a string. It takes the stream as an argument. The second argument is an <em>eof-value</em> that is returned if end of file is reached.</p>
<div class="language-lisp codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-lisp codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">(</span><span class="token car">with-open-file</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token car">input</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;my-file.txt&quot;</span><span class="token plain"> </span><span class="token lisp-property property" style="color:#36acaa">:direction</span><span class="token plain"> </span><span class="token lisp-property property" style="color:#36acaa">:input</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">(</span><span class="token car">loop</span><span class="token plain"> for line = </span><span class="token punctuation" style="color:#393A34">(</span><span class="token car">read-line</span><span class="token plain"> input </span><span class="token boolean" style="color:#36acaa">nil</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        while line</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        do </span><span class="token punctuation" style="color:#393A34">(</span><span class="token car">print</span><span class="token plain"> line</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="25-write-line-writing-a-line">2.5 <code>write-line</code>: Writing a Line<a href="#25-write-line-writing-a-line" class="hash-link" aria-label="Direct link to 25-write-line-writing-a-line" title="Direct link to 25-write-line-writing-a-line">​</a></h3>
<p>The <code>write-line</code> function writes a string to a stream followed by a newline.</p>
<div class="language-lisp codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-lisp codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">(</span><span class="token car">with-open-file</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token car">output</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;output.txt&quot;</span><span class="token plain"> </span><span class="token lisp-property property" style="color:#36acaa">:direction</span><span class="token plain"> </span><span class="token lisp-property property" style="color:#36acaa">:output</span><span class="token plain"> </span><span class="token lisp-property property" style="color:#36acaa">:if-exists</span><span class="token plain"> </span><span class="token lisp-property property" style="color:#36acaa">:supersede</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">(</span><span class="token car">write-line</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;This is the first line.&quot;</span><span class="token plain"> output</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">(</span><span class="token car">write-line</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;This is the second line.&quot;</span><span class="token plain"> output</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="26-read-char-and-write-char-reading-and-writing-characters">2.6 <code>read-char</code> and <code>write-char</code>: Reading and Writing Characters<a href="#26-read-char-and-write-char-reading-and-writing-characters" class="hash-link" aria-label="Direct link to 26-read-char-and-write-char-reading-and-writing-characters" title="Direct link to 26-read-char-and-write-char-reading-and-writing-characters">​</a></h3>
<p><code>read-char</code> reads a single character from a stream. <code>write-char</code> writes a single character to a stream.</p>
<div class="language-lisp codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-lisp codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">(</span><span class="token car">with-open-file</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token car">input</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;chars.txt&quot;</span><span class="token plain"> </span><span class="token lisp-property property" style="color:#36acaa">:direction</span><span class="token plain"> </span><span class="token lisp-property property" style="color:#36acaa">:input</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">(</span><span class="token car">loop</span><span class="token plain"> for char = </span><span class="token punctuation" style="color:#393A34">(</span><span class="token car">read-char</span><span class="token plain"> input </span><span class="token boolean" style="color:#36acaa">nil</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        while char</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        do </span><span class="token punctuation" style="color:#393A34">(</span><span class="token car">format</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">t</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;Character: ~c Code: ~d~%&quot;</span><span class="token plain"> char </span><span class="token punctuation" style="color:#393A34">(</span><span class="token car">char-code</span><span class="token plain"> char</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">(</span><span class="token car">with-open-file</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token car">output</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;out-chars.txt&quot;</span><span class="token plain"> </span><span class="token lisp-property property" style="color:#36acaa">:direction</span><span class="token plain"> </span><span class="token lisp-property property" style="color:#36acaa">:output</span><span class="token plain"> </span><span class="token lisp-property property" style="color:#36acaa">:if-exists</span><span class="token plain"> </span><span class="token lisp-property property" style="color:#36acaa">:supersede</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">(</span><span class="token car">write-char</span><span class="token plain"> #\A output</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">(</span><span class="token car">write-char</span><span class="token plain"> #\Newline output</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">(</span><span class="token car">write-char</span><span class="token plain"> #\B output</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="27-read-byte-and-write-byte-reading-and-writing-bytes-binary-files">2.7 <code>read-byte</code> and <code>write-byte</code>: Reading and Writing Bytes (Binary Files)<a href="#27-read-byte-and-write-byte-reading-and-writing-bytes-binary-files" class="hash-link" aria-label="Direct link to 27-read-byte-and-write-byte-reading-and-writing-bytes-binary-files" title="Direct link to 27-read-byte-and-write-byte-reading-and-writing-bytes-binary-files">​</a></h3>
<p>For binary files, you use <code>read-byte</code> and <code>write-byte</code>. You must open the file with an appropriate <code>:element-type</code>, such as <code>&#x27;(unsigned-byte 8)</code>.</p>
<div class="language-lisp codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-lisp codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">(</span><span class="token car">with-open-file</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token car">output</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;data.bin&quot;</span><span class="token plain"> </span><span class="token lisp-property property" style="color:#36acaa">:direction</span><span class="token plain"> </span><span class="token lisp-property property" style="color:#36acaa">:output</span><span class="token plain"> </span><span class="token lisp-property property" style="color:#36acaa">:if-exists</span><span class="token plain"> </span><span class="token lisp-property property" style="color:#36acaa">:supersede</span><span class="token plain"> </span><span class="token lisp-property property" style="color:#36acaa">:element-type</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">&#x27;(</span><span class="token car">unsigned-byte</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">8</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">(</span><span class="token car">write-byte</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">255</span><span class="token plain"> output</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">(</span><span class="token car">write-byte</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token plain"> output</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">(</span><span class="token car">write-byte</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">128</span><span class="token plain"> output</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">(</span><span class="token car">with-open-file</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token car">input</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;data.bin&quot;</span><span class="token plain"> </span><span class="token lisp-property property" style="color:#36acaa">:direction</span><span class="token plain"> </span><span class="token lisp-property property" style="color:#36acaa">:input</span><span class="token plain"> </span><span class="token lisp-property property" style="color:#36acaa">:element-type</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">&#x27;(</span><span class="token car">unsigned-byte</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">8</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">(</span><span class="token car">loop</span><span class="token plain"> for byte = </span><span class="token punctuation" style="color:#393A34">(</span><span class="token car">read-byte</span><span class="token plain"> input </span><span class="token boolean" style="color:#36acaa">nil</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        while byte</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        do </span><span class="token punctuation" style="color:#393A34">(</span><span class="token car">format</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">t</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;Byte: ~d~%&quot;</span><span class="token plain"> byte</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>This section covered the basics of file I/O in Common Lisp. You now know how to open, close, read from, and write to files, handling both text and binary data. The use of <code>with-open-file</code> is highly recommended for its conciseness and automatic resource management.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="3-reading-and-writing-lisp-data-structures">3. Reading and Writing Lisp Data Structures<a href="#3-reading-and-writing-lisp-data-structures" class="hash-link" aria-label="Direct link to 3. Reading and Writing Lisp Data Structures" title="Direct link to 3. Reading and Writing Lisp Data Structures">​</a></h2>
<p>This section covers how to read and write arbitrary Lisp data structures to and from streams (including files). This is crucial for saving and loading data, as well as for communicating with other Lisp programs.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="31-read-reading-arbitrary-lisp-objects">3.1 <code>read</code>: Reading Arbitrary Lisp Objects<a href="#31-read-reading-arbitrary-lisp-objects" class="hash-link" aria-label="Direct link to 31-read-reading-arbitrary-lisp-objects" title="Direct link to 31-read-reading-arbitrary-lisp-objects">​</a></h3>
<p>The <code>read</code> function is the primary way to parse Lisp expressions from an input stream. It can read any valid Lisp object, including numbers, symbols, strings, lists, vectors, and more.</p>
<div class="language-lisp codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-lisp codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">(</span><span class="token car">with-input-from-string</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token car">input</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;(1 2 \&quot;hello\&quot; symbol)&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">; Read from a string</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">(</span><span class="token car">print</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token car">read</span><span class="token plain"> input</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">; Prints 1</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">(</span><span class="token car">print</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token car">read</span><span class="token plain"> input</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">; Prints 2</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">(</span><span class="token car">print</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token car">read</span><span class="token plain"> input</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">; Prints &quot;hello&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">(</span><span class="token car">print</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token car">read</span><span class="token plain"> input</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">; Prints SYMBOL</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">(</span><span class="token car">with-input-from-string</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token car">input</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;#(1 2 3)&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">(</span><span class="token car">print</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token car">read</span><span class="token plain"> input</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">; prints #(1 2 3)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>As we&#x27;ve seen before, when used without an explicit stream argument, <code>read</code> reads from <code>*standard-input*</code>.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="32-print-prin1-princ-write-writing-lisp-objects">3.2 <code>print</code>, <code>prin1</code>, <code>princ</code>, <code>write</code>: Writing Lisp Objects<a href="#32-print-prin1-princ-write-writing-lisp-objects" class="hash-link" aria-label="Direct link to 32-print-prin1-princ-write-writing-lisp-objects" title="Direct link to 32-print-prin1-princ-write-writing-lisp-objects">​</a></h3>
<p>These functions write Lisp objects to an output stream.</p>
<ul>
<li>
<p><strong><code>print</code></strong>: Writes the object followed by a newline. The output is <em>readable</em> by <code>read</code>. It prints the object using <code>prin1</code> and then prints a newline.</p>
<div class="language-lisp codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-lisp codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">(</span><span class="token car">print</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;This is a string.&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">; Prints &quot;This is a string.&quot; followed by a newline.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">(</span><span class="token car">print</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">&#x27;(</span><span class="token car">a</span><span class="token plain"> b c</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain">          </span><span class="token comment" style="color:#999988;font-style:italic">; Prints (A B C) followed by a newline.</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
<li>
<p><strong><code>prin1</code></strong>: Writes the object without a trailing newline. The output is <em>readable</em> by <code>read</code>.</p>
<div class="language-lisp codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-lisp codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">(</span><span class="token car">prin1</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;This is a string.&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">; Prints &quot;This is a string.&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">(</span><span class="token car">prin1</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">&#x27;(</span><span class="token car">a</span><span class="token plain"> b c</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain">          </span><span class="token comment" style="color:#999988;font-style:italic">; Prints (A B C)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
<li>
<p><strong><code>princ</code></strong>: Writes the object without a trailing newline and in a more human-readable format (e.g., strings are printed without quotes). The output is <em>not</em> guaranteed to be readable by <code>read</code>.</p>
<div class="language-lisp codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-lisp codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">(</span><span class="token car">princ</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;This is a string.&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">; Prints This is a string.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">(</span><span class="token car">princ</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">&#x27;(</span><span class="token car">a</span><span class="token plain"> b c</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain">          </span><span class="token comment" style="color:#999988;font-style:italic">; Prints (A B C)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
<li>
<p><strong><code>write</code></strong>: This is the most general printing function. It provides the most control over the output format through various keyword arguments. By default, it produces output that is readable by <code>read</code>, similar to <code>prin1</code>.</p>
<div class="language-lisp codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-lisp codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">(</span><span class="token car">write</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;This is a string.&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">; Prints &quot;This is a string.&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">(</span><span class="token car">write</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">&#x27;(</span><span class="token car">a</span><span class="token plain"> b c</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain">          </span><span class="token comment" style="color:#999988;font-style:italic">; Prints (A B C)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p><code>write</code> accepts many keyword arguments for controlling printing. Some of the most important are covered below using the special variables that control them.</p>
</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="33-print-pretty-controlling-pretty-printing">3.3 <code>*print-pretty*</code>: Controlling Pretty Printing<a href="#33-print-pretty-controlling-pretty-printing" class="hash-link" aria-label="Direct link to 33-print-pretty-controlling-pretty-printing" title="Direct link to 33-print-pretty-controlling-pretty-printing">​</a></h3>
<p>The <code>*print-pretty*</code> variable controls whether lists and other complex data structures are printed in a nicely formatted, indented way.</p>
<div class="language-lisp codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-lisp codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">let</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">(</span><span class="token car">*print-pretty*</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">t</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">; Enable pretty printing</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">(</span><span class="token car">print</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">&#x27;(</span><span class="token car">very</span><span class="token plain"> very very long list </span><span class="token punctuation" style="color:#393A34">(</span><span class="token car">with</span><span class="token plain"> many </span><span class="token punctuation" style="color:#393A34">(</span><span class="token car">nested</span><span class="token plain"> sublists</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> and some other stuff</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">; Output will be nicely indented.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">let</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">(</span><span class="token car">*print-pretty*</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">nil</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">; Disable pretty printing</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">(</span><span class="token car">print</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">&#x27;(</span><span class="token car">very</span><span class="token plain"> very very long list </span><span class="token punctuation" style="color:#393A34">(</span><span class="token car">with</span><span class="token plain"> many </span><span class="token punctuation" style="color:#393A34">(</span><span class="token car">nested</span><span class="token plain"> sublists</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> and some other stuff</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">; Output will be on a single line.</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="34-print-circle-handling-circular-structures">3.4 <code>*print-circle*</code>: Handling Circular Structures<a href="#34-print-circle-handling-circular-structures" class="hash-link" aria-label="Direct link to 34-print-circle-handling-circular-structures" title="Direct link to 34-print-circle-handling-circular-structures">​</a></h3>
<p>If you have a circular data structure (where a part of the structure refers back to itself), <code>print</code> and <code>prin1</code> would normally enter an infinite loop. The <code>*print-circle*</code> variable prevents this by using <code>#n=</code> and <code>#n#</code> to represent circular references.</p>
<div class="language-lisp codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-lisp codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">let</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">(</span><span class="token car">x</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token car">list</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">2</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">(</span><span class="token car">setf</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token car">cdr</span><span class="token plain"> x</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> x</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">; Create a circular list</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">let</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">(</span><span class="token car">*print-circle*</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">t</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">(</span><span class="token car">print</span><span class="token plain"> x</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">; Prints #(1 . #1#)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="35-print-readably-ensuring-readability">3.5 <code>*print-readably*</code>: Ensuring Readability<a href="#35-print-readably-ensuring-readability" class="hash-link" aria-label="Direct link to 35-print-readably-ensuring-readability" title="Direct link to 35-print-readably-ensuring-readability">​</a></h3>
<p>The <code>*print-readably*</code> variable is crucial for ensuring that the output of <code>write</code> (and therefore <code>print</code> and <code>prin1</code>) can be read back in using <code>read</code>. When <code>*print-readably*</code> is <code>t</code>, <code>write</code> will escape special characters and use appropriate syntax to make the output unambiguous.</p>
<div class="language-lisp codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-lisp codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">let</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">(</span><span class="token car">*print-readably*</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">t</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">(</span><span class="token car">print</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;This string has \&quot;quotes\&quot;.&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">; Prints &quot;This string has \&quot;quotes\&quot;.&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">(</span><span class="token car">print</span><span class="token plain"> &#x27;|This symbol has spaces.|</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">; Prints |This symbol has spaces.|</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">let</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">(</span><span class="token car">*print-readably*</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">nil</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">(</span><span class="token car">print</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;This string has \&quot;quotes\&quot;.&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">; Prints This string has &quot;quotes&quot;.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">(</span><span class="token car">print</span><span class="token plain"> &#x27;|This symbol has spaces.|</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">; Prints This symbol has spaces.</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>It is highly recommended to set <code>*print-readably*</code> to <code>t</code> when writing data to files that you intend to read back in using <code>read</code>.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="36-using-with-standard-io-syntax-to-control-readtables">3.6 Using <code>with-standard-io-syntax</code> to Control Readtables<a href="#36-using-with-standard-io-syntax-to-control-readtables" class="hash-link" aria-label="Direct link to 36-using-with-standard-io-syntax-to-control-readtables" title="Direct link to 36-using-with-standard-io-syntax-to-control-readtables">​</a></h3>
<p>The <em>readtable</em> controls how <code>read</code> parses input. The <code>with-standard-io-syntax</code> macro establishes a standard readtable, ensuring consistent behavior. It&#x27;s good practice to use this macro when reading or writing data that needs to be portable.</p>
<div class="language-lisp codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-lisp codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">(</span><span class="token car">with-standard-io-syntax</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">(</span><span class="token car">with-open-file</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token car">output</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;data.lisp&quot;</span><span class="token plain"> </span><span class="token lisp-property property" style="color:#36acaa">:direction</span><span class="token plain"> </span><span class="token lisp-property property" style="color:#36acaa">:output</span><span class="token plain"> </span><span class="token lisp-property property" style="color:#36acaa">:if-exists</span><span class="token plain"> </span><span class="token lisp-property property" style="color:#36acaa">:supersede</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">(</span><span class="token car">print</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">&#x27;(</span><span class="token car">a</span><span class="token plain"> b c</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> output</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">(</span><span class="token car">with-standard-io-syntax</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">(</span><span class="token car">with-open-file</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token car">input</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;data.lisp&quot;</span><span class="token plain"> </span><span class="token lisp-property property" style="color:#36acaa">:direction</span><span class="token plain"> </span><span class="token lisp-property property" style="color:#36acaa">:input</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">(</span><span class="token car">print</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token car">read</span><span class="token plain"> input</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">; prints (A B C)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>This section covered how to read and write Lisp data structures using <code>read</code>, <code>print</code>, <code>prin1</code>, <code>princ</code>, and <code>write</code>, and how to control the output format using special variables like <code>*print-pretty*</code>, <code>*print-circle*</code>, and <code>*print-readably*</code>. Using <code>with-standard-io-syntax</code> is recommended for portability. These techniques are essential for saving and loading data and for exchanging data between Lisp programs.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="4-binary-io-in-common-lisp">4. Binary I/O in Common Lisp<a href="#4-binary-io-in-common-lisp" class="hash-link" aria-label="Direct link to 4. Binary I/O in Common Lisp" title="Direct link to 4. Binary I/O in Common Lisp">​</a></h2>
<p>Binary I/O deals with reading and writing raw bytes to and from files, as opposed to character-based I/O. This is essential for working with non-textual data like images, audio, or compiled code.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="41-using-element-type-unsigned-byte-8-with-open">4.1 Using <code>:element-type &#x27;(unsigned-byte 8)</code> with <code>open</code><a href="#41-using-element-type-unsigned-byte-8-with-open" class="hash-link" aria-label="Direct link to 41-using-element-type-unsigned-byte-8-with-open" title="Direct link to 41-using-element-type-unsigned-byte-8-with-open">​</a></h3>
<p>To perform binary I/O, you must open the file in binary mode by specifying the <code>:element-type</code> keyword argument to <code>open</code>. The most common element type for binary files is <code>&#x27;(unsigned-byte 8)</code>, which represents unsigned 8-bit integers (bytes).</p>
<div class="language-lisp codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-lisp codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">(</span><span class="token car">open</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;data.bin&quot;</span><span class="token plain"> </span><span class="token lisp-property property" style="color:#36acaa">:direction</span><span class="token plain"> </span><span class="token lisp-property property" style="color:#36acaa">:output</span><span class="token plain"> </span><span class="token lisp-property property" style="color:#36acaa">:element-type</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">&#x27;(</span><span class="token car">unsigned-byte</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">8</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">; Open for writing binary data</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">(</span><span class="token car">open</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;data.bin&quot;</span><span class="token plain"> </span><span class="token lisp-property property" style="color:#36acaa">:direction</span><span class="token plain"> </span><span class="token lisp-property property" style="color:#36acaa">:input</span><span class="token plain"> </span><span class="token lisp-property property" style="color:#36acaa">:element-type</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">&#x27;(</span><span class="token car">unsigned-byte</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">8</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">; Open for reading binary data</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="42-read-byte-and-write-byte-reading-and-writing-bytes">4.2 <code>read-byte</code> and <code>write-byte</code>: Reading and Writing Bytes<a href="#42-read-byte-and-write-byte-reading-and-writing-bytes" class="hash-link" aria-label="Direct link to 42-read-byte-and-write-byte-reading-and-writing-bytes" title="Direct link to 42-read-byte-and-write-byte-reading-and-writing-bytes">​</a></h3>
<ul>
<li>
<p><strong><code>read-byte</code></strong>: Reads a single byte from a binary stream. It takes the stream as an argument. If the end of the file is reached, it returns <code>eof</code> if you pass <code>nil</code> as the second argument, otherwise an error will be signaled.</p>
<div class="language-lisp codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-lisp codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">(</span><span class="token car">with-open-file</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token car">input</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;data.bin&quot;</span><span class="token plain"> </span><span class="token lisp-property property" style="color:#36acaa">:direction</span><span class="token plain"> </span><span class="token lisp-property property" style="color:#36acaa">:input</span><span class="token plain"> </span><span class="token lisp-property property" style="color:#36acaa">:element-type</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">&#x27;(</span><span class="token car">unsigned-byte</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">8</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">let</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">(</span><span class="token car">byte1</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token car">read-byte</span><span class="token plain"> input </span><span class="token boolean" style="color:#36acaa">nil</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">when</span><span class="token plain"> byte1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">(</span><span class="token car">format</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">t</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;Byte 1: ~d~%&quot;</span><span class="token plain"> byte1</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">let</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">(</span><span class="token car">byte2</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token car">read-byte</span><span class="token plain"> input </span><span class="token boolean" style="color:#36acaa">nil</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">when</span><span class="token plain"> byte2</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token punctuation" style="color:#393A34">(</span><span class="token car">format</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">t</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;Byte 2: ~d~%&quot;</span><span class="token plain"> byte2</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
<li>
<p><strong><code>write-byte</code></strong>: Writes a single byte to a binary stream. It takes the byte (an integer between 0 and 255) and the stream as arguments.</p>
<div class="language-lisp codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-lisp codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">(</span><span class="token car">with-open-file</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token car">output</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;data.bin&quot;</span><span class="token plain"> </span><span class="token lisp-property property" style="color:#36acaa">:direction</span><span class="token plain"> </span><span class="token lisp-property property" style="color:#36acaa">:output</span><span class="token plain"> </span><span class="token lisp-property property" style="color:#36acaa">:if-exists</span><span class="token plain"> </span><span class="token lisp-property property" style="color:#36acaa">:supersede</span><span class="token plain"> </span><span class="token lisp-property property" style="color:#36acaa">:element-type</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">&#x27;(</span><span class="token car">unsigned-byte</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">8</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">(</span><span class="token car">write-byte</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">255</span><span class="token plain"> output</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">(</span><span class="token car">write-byte</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token plain"> output</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">(</span><span class="token car">write-byte</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">128</span><span class="token plain"> output</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
</ul>
<p><strong>Example: Copying a Binary File:</strong></p>
<p>This example demonstrates how to copy a binary file byte by byte:</p>
<div class="language-lisp codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-lisp codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">(</span><span class="token defun keyword" style="color:#00009f">defun</span><span class="token defun"> </span><span class="token defun function" style="color:#d73a49">copy-binary-file</span><span class="token defun"> </span><span class="token defun punctuation" style="color:#393A34">(</span><span class="token defun arguments argument variable" style="color:#36acaa">input-filename</span><span class="token defun arguments"> </span><span class="token defun arguments argument variable" style="color:#36acaa">output-filename</span><span class="token defun punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">(</span><span class="token car">with-open-file</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token car">input</span><span class="token plain"> input-filename </span><span class="token lisp-property property" style="color:#36acaa">:direction</span><span class="token plain"> </span><span class="token lisp-property property" style="color:#36acaa">:input</span><span class="token plain"> </span><span class="token lisp-property property" style="color:#36acaa">:element-type</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">&#x27;(</span><span class="token car">unsigned-byte</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">8</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">(</span><span class="token car">with-open-file</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token car">output</span><span class="token plain"> output-filename </span><span class="token lisp-property property" style="color:#36acaa">:direction</span><span class="token plain"> </span><span class="token lisp-property property" style="color:#36acaa">:output</span><span class="token plain"> </span><span class="token lisp-property property" style="color:#36acaa">:if-exists</span><span class="token plain"> </span><span class="token lisp-property property" style="color:#36acaa">:supersede</span><span class="token plain"> </span><span class="token lisp-property property" style="color:#36acaa">:element-type</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">&#x27;(</span><span class="token car">unsigned-byte</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">8</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">when</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">and</span><span class="token plain"> input output</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">(</span><span class="token car">loop</span><span class="token plain"> for byte = </span><span class="token punctuation" style="color:#393A34">(</span><span class="token car">read-byte</span><span class="token plain"> input </span><span class="token boolean" style="color:#36acaa">nil</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">              while byte</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">              do </span><span class="token punctuation" style="color:#393A34">(</span><span class="token car">write-byte</span><span class="token plain"> byte output</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">(</span><span class="token car">copy-binary-file</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;input.jpg&quot;</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;output.jpg&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">; Copies input.jpg to output.jpg</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>This function opens both the input and output files in binary mode and then reads bytes from the input file and writes them to the output file until the end of the input file is reached.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="5-pathnames-in-common-lisp">5. Pathnames in Common Lisp<a href="#5-pathnames-in-common-lisp" class="hash-link" aria-label="Direct link to 5. Pathnames in Common Lisp" title="Direct link to 5. Pathnames in Common Lisp">​</a></h2>
<p>Pathnames are a standardized way to represent file and directory paths in Common Lisp. They provide a platform-independent way to work with files.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="51-representing-file-and-directory-paths">5.1 Representing File and Directory Paths<a href="#51-representing-file-and-directory-paths" class="hash-link" aria-label="Direct link to 5.1 Representing File and Directory Paths" title="Direct link to 5.1 Representing File and Directory Paths">​</a></h3>
<p>A pathname has several components:</p>
<ul>
<li><strong><code>host</code></strong>: The file system or network host (e.g., &quot;localhost&quot;, &quot;my-server&quot;).</li>
<li><strong><code>device</code></strong>: The device or volume (e.g., &quot;C:&quot;, &quot;/dev/sda1&quot;).</li>
<li><strong><code>directory</code></strong>: A list of directory names.</li>
<li><strong><code>name</code></strong>: The file name.</li>
<li><strong><code>type</code></strong>: The file extension (e.g., &quot;txt&quot;, &quot;jpg&quot;, &quot;lisp&quot;).</li>
<li><strong><code>version</code></strong>: A file version number (rarely used).</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="52-pathname-functions">5.2 Pathname Functions<a href="#52-pathname-functions" class="hash-link" aria-label="Direct link to 5.2 Pathname Functions" title="Direct link to 5.2 Pathname Functions">​</a></h3>
<ul>
<li>
<p><strong><code>pathname</code></strong>: Converts a string or another object to a pathname object.</p>
<div class="language-lisp codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-lisp codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">(</span><span class="token car">pathname</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;my-file.txt&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">(</span><span class="token car">pathname</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;/path/to/my/file.txt&quot;</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
<li>
<p><strong><code>pathnamep</code></strong>: Tests if an object is a pathname.</p>
<div class="language-lisp codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-lisp codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">(</span><span class="token car">pathnamep</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token car">pathname</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;my-file.txt&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">; Returns T</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">(</span><span class="token car">pathnamep</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;my-file.txt&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain">             </span><span class="token comment" style="color:#999988;font-style:italic">; Returns NIL</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
<li>
<p><strong><code>namestring</code></strong>: Converts a pathname object to a string.</p>
<div class="language-lisp codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-lisp codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">(</span><span class="token car">namestring</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token car">pathname</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;my-file.txt&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">; Returns &quot;my-file.txt&quot; (or the appropriate platform-specific string)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
<li>
<p><strong><code>merge-pathnames</code></strong>: Merges two pathnames. This is useful for constructing relative paths.</p>
<div class="language-lisp codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-lisp codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">(</span><span class="token car">merge-pathnames</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;file.txt&quot;</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;/path/to/directory/&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">; Returns a pathname representing &quot;/path/to/directory/file.txt&quot;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
<li>
<p><strong><code>pathname-directory</code></strong>: Extracts the directory component of a pathname.</p>
</li>
<li>
<p><strong><code>pathname-name</code></strong>: Extracts the name component of a pathname.</p>
</li>
<li>
<p><strong><code>pathname-type</code></strong>: Extracts the type component of a pathname.</p>
</li>
<li>
<p><strong><code>pathname-host</code></strong>: Extracts the host component of a pathname.</p>
</li>
<li>
<p><strong><code>pathname-device</code></strong>: Extracts the device component of a pathname.</p>
</li>
</ul>
<div class="language-lisp codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-lisp codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">let</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">(</span><span class="token car">my-pathname</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token car">pathname</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;/path/to/my/file.txt&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">(</span><span class="token car">print</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token car">pathname-directory</span><span class="token plain"> my-pathname</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">; prints (:ABSOLUTE &quot;path&quot; &quot;to&quot; &quot;my&quot;)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">(</span><span class="token car">print</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token car">pathname-name</span><span class="token plain"> my-pathname</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">; prints &quot;file&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">(</span><span class="token car">print</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token car">pathname-type</span><span class="token plain"> my-pathname</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">; prints &quot;txt&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p><strong>Example: Reading from a File in a Specific Directory:</strong></p>
<div class="language-lisp codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-lisp codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">let</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">(</span><span class="token car">directory-path</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;/my/data/&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">let</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">(</span><span class="token car">file-pathname</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token car">merge-pathnames</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;input.txt&quot;</span><span class="token plain"> directory-path</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">(</span><span class="token car">with-open-file</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token car">input</span><span class="token plain"> file-pathname </span><span class="token lisp-property property" style="color:#36acaa">:direction</span><span class="token plain"> </span><span class="token lisp-property property" style="color:#36acaa">:input</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">when</span><span class="token plain"> input</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">(</span><span class="token car">loop</span><span class="token plain"> for line = </span><span class="token punctuation" style="color:#393A34">(</span><span class="token car">read-line</span><span class="token plain"> input </span><span class="token boolean" style="color:#36acaa">nil</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">              while line</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">              do </span><span class="token punctuation" style="color:#393A34">(</span><span class="token car">print</span><span class="token plain"> line</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>This example shows how to use <code>merge-pathnames</code> to construct a pathname from a directory path and a file name.</p>
<p>This section covered binary I/O and pathnames in Common Lisp. Binary I/O is essential for working with non-textual data, while pathnames provide a platform-independent way to handle file and directory paths. These are important tools for any Lisp programmer working with files.</p></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/lisp-docs/lisp-docs.github.io/tree/main/docs/tutorial/io.md" target="_blank" rel="noopener noreferrer" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_vwxv"><span class="theme-last-updated">Last updated<!-- --> by <b>Daniel Nussenbaum</b></span></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/docs/tutorial/object-system"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Object System</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/docs/tutorial/types"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Types</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#introduction-to-input-and-output-in-common-lisp" class="table-of-contents__link toc-highlight">Introduction to Input and Output in Common Lisp</a></li><li><a href="#1-standard-input-and-output-in-common-lisp" class="table-of-contents__link toc-highlight">1. Standard Input and Output in Common Lisp</a><ul><li><a href="#11-standard-streams-standard-input-standard-output-error-output" class="table-of-contents__link toc-highlight">1.1 Standard Streams: <code>*standard-input*</code>, <code>*standard-output*</code>, <code>*error-output*</code></a></li><li><a href="#12-read-reading-lisp-objects-from-input" class="table-of-contents__link toc-highlight">1.2 <code>read</code>: Reading Lisp Objects from Input</a></li><li><a href="#13-print-prin1-princ-writing-lisp-objects-to-output" class="table-of-contents__link toc-highlight">1.3 <code>print</code>, <code>prin1</code>, <code>princ</code>: Writing Lisp Objects to Output</a></li><li><a href="#14-format-formatted-output" class="table-of-contents__link toc-highlight">1.4 <code>format</code>: Formatted Output</a></li></ul></li><li><a href="#2-file-io-in-common-lisp" class="table-of-contents__link toc-highlight">2. File I/O in Common Lisp</a><ul><li><a href="#21-open-opening-files" class="table-of-contents__link toc-highlight">2.1 <code>open</code>: Opening Files</a></li><li><a href="#22-close-closing-files" class="table-of-contents__link toc-highlight">2.2 <code>close</code>: Closing Files</a></li><li><a href="#23-with-open-file-a-convenient-macro" class="table-of-contents__link toc-highlight">2.3 <code>with-open-file</code>: A Convenient Macro</a></li><li><a href="#24-read-line-reading-a-line" class="table-of-contents__link toc-highlight">2.4 <code>read-line</code>: Reading a Line</a></li><li><a href="#25-write-line-writing-a-line" class="table-of-contents__link toc-highlight">2.5 <code>write-line</code>: Writing a Line</a></li><li><a href="#26-read-char-and-write-char-reading-and-writing-characters" class="table-of-contents__link toc-highlight">2.6 <code>read-char</code> and <code>write-char</code>: Reading and Writing Characters</a></li><li><a href="#27-read-byte-and-write-byte-reading-and-writing-bytes-binary-files" class="table-of-contents__link toc-highlight">2.7 <code>read-byte</code> and <code>write-byte</code>: Reading and Writing Bytes (Binary Files)</a></li></ul></li><li><a href="#3-reading-and-writing-lisp-data-structures" class="table-of-contents__link toc-highlight">3. Reading and Writing Lisp Data Structures</a><ul><li><a href="#31-read-reading-arbitrary-lisp-objects" class="table-of-contents__link toc-highlight">3.1 <code>read</code>: Reading Arbitrary Lisp Objects</a></li><li><a href="#32-print-prin1-princ-write-writing-lisp-objects" class="table-of-contents__link toc-highlight">3.2 <code>print</code>, <code>prin1</code>, <code>princ</code>, <code>write</code>: Writing Lisp Objects</a></li><li><a href="#33-print-pretty-controlling-pretty-printing" class="table-of-contents__link toc-highlight">3.3 <code>*print-pretty*</code>: Controlling Pretty Printing</a></li><li><a href="#34-print-circle-handling-circular-structures" class="table-of-contents__link toc-highlight">3.4 <code>*print-circle*</code>: Handling Circular Structures</a></li><li><a href="#35-print-readably-ensuring-readability" class="table-of-contents__link toc-highlight">3.5 <code>*print-readably*</code>: Ensuring Readability</a></li><li><a href="#36-using-with-standard-io-syntax-to-control-readtables" class="table-of-contents__link toc-highlight">3.6 Using <code>with-standard-io-syntax</code> to Control Readtables</a></li></ul></li><li><a href="#4-binary-io-in-common-lisp" class="table-of-contents__link toc-highlight">4. Binary I/O in Common Lisp</a><ul><li><a href="#41-using-element-type-unsigned-byte-8-with-open" class="table-of-contents__link toc-highlight">4.1 Using <code>:element-type &#39;(unsigned-byte 8)</code> with <code>open</code></a></li><li><a href="#42-read-byte-and-write-byte-reading-and-writing-bytes" class="table-of-contents__link toc-highlight">4.2 <code>read-byte</code> and <code>write-byte</code>: Reading and Writing Bytes</a></li></ul></li><li><a href="#5-pathnames-in-common-lisp" class="table-of-contents__link toc-highlight">5. Pathnames in Common Lisp</a><ul><li><a href="#51-representing-file-and-directory-paths" class="table-of-contents__link toc-highlight">5.1 Representing File and Directory Paths</a></li><li><a href="#52-pathname-functions" class="table-of-contents__link toc-highlight">5.2 Pathname Functions</a></li></ul></li></ul></div></div></div></div></main></div></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Docs</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/docs/tutorial">Common Lisp Tutorial</a></li><li class="footer__item"><a href="https://lisp-docs.github.io/cl-language-reference/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Common Lisp Technical Reference</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/help">Help</a></li></ul></div><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://stackoverflow.com/questions/tagged/common-lisp" target="_blank" rel="noopener noreferrer" class="footer__link-item">Stack Overflow<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://discord.gg/hhk46CE" target="_blank" rel="noopener noreferrer" class="footer__link-item">Discord<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://www.reddit.com/r/common_lisp" target="_blank" rel="noopener noreferrer" class="footer__link-item">Reddit<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://irclog.tymoon.eu/libera/commonlisp" target="_blank" rel="noopener noreferrer" class="footer__link-item">IRC<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/blog">Blog</a></li><li class="footer__item"><a href="https://github.com/lisp-docs/lisp-docs.github.io" target="_blank" rel="noopener noreferrer" class="footer__link-item">Tutorial and General Content GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://github.com/lisp-docs/cl-language-reference/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Technical Reference GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a class="footer__link-item" href="/docs/contribute">Contribute to the Docs</a></li></ul></div><div class="col footer__col"><div class="footer__title">Common Lisp Docs</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/docs/about">About</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/whylisp">Why Lisp</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/getting-started">Getting Started</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/faq">FAQ</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/help">Getting Help</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/howto">How To Guides</a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2024 Common Lisp Docs, MIT License (see GitHub Repo).</div></div></div></footer></div>
</body>
</html>